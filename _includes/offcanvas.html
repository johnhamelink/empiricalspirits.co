{% for entry in site.data.navigation %}{% capture fullurl %}{{ site.baseurl }}{{ entry.url }}{% endcapture %}{% if fullurl == page.url %}{% assign current_page = fullurl %}{% break %}{% elsif page.url contains fullurl %}{% assign current_page = fullurl %}{% endif %}{% endfor %}
<!-- Navigation -->
<div class="grid-y align-center" style="height: 100%;">
  
  <div class="shrink cell">
    <ul class="menu vertical align-center">
      {% for entry in site.data.navigation %}
      {% if entry.url == current_page %}
      {% assign current = ' class="active"' %}
      {% else %}
      {% assign current = null %}
      {% endif %}
      {% assign sublinks = entry.sublinks %}
      {% if sublinks %}
      <li{{ current }}>
      <a href="{{ site.baseurl }}{{ entry.url }}">{{ entry.title }}</a>
      <ul class="menu vertical">
      {% for sublink in sublinks %}
      <li><a href="{{ site.baseurl }}{{ sublink.url }}">{{ sublink.title }}</a></li>
      {% endfor %}
      </ul>
      </li>
      {% else %}
      <li{{ current }}><a href="{{ site.baseurl }}{{ entry.url }}" class="{{ entry.color }}"><h2>{{ entry.title }}</h2></a></li>
      {% endif %}
      {% endfor %}
    </ul>
  </div>

</div>
<!-- End Navigation -->